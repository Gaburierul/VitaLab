<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Controle de Estoque</title>

		<link rel="stylesheet" href="../CSS/style.css">
		<link rel="stylesheet" href="../CSS/CssPrincipal.css">
		<link rel="stylesheet" href="../CSS/cssEstoque.css">
</head>
<body>
	<header>
		<h1>VitaLab</h1>
		<p>Monitoramento dos insumos laboratoriais, entrada, saída e alertas de reposição.</p>
	</header>
	<nav>
		<a href="Menu_Principal.html">Menu Principal</a>
		<a href="Cadastro_Gerenciamento_Funcionarios.html" >Cadastro de Funcionarios</a>
		<a href="Cadastro_Gerenciamento_Pacientes.html">Cadastro de Pacientes</a>
		<a href="Controle_Estoque.html" class="blinking" >Controle de estoque</a>
		<a href="Faturamento_Financeiro.html">Faturamento e Financeiro</a>
		<a href="Gestao_Exames.html">Gestão de Exames</a>
		
	</nav>
	<div class="container estoque-wrapper">
		<section class="section card">
			<!-- Cabeçalho e filtros -->
			<div class="estoque-header">
				<div>
					<h2>Controle de Estoque</h2>
					<p style="color:var(--muted);margin-top:6px;">Gerencie insumos, entradas/saídas e receba alertas.</p>
				</div>
				<div class="estoque-actions">
					<input id="searchName" class="search-input" type="search" placeholder="Buscar por nome..." />
					<select id="filterCategory" class="select"><option value="">Todas as categorias</option></select>
					<select id="filterExpiry" class="select"><option value="all">Todas as validades</option><option value="30">Vence em 30 dias</option><option value="60">Vence em 60 dias</option></select>
					<label style="display:flex;align-items:center;gap:6px;color:var(--muted);"><input id="filterLowStock" type="checkbox"/> Estoque baixo</label>
					<button id="btnAddItem" class="btn">+ Novo Insumo</button>
					<button id="btnExportCSV" class="btn secondary">Exportar CSV</button>
				</div>
			</div>

			<div class="table-wrap card" style="margin-top:12px; padding:0;">
			<table id="insumoTable" class="estoque-table">
				<thead>
					<tr>
						<th>ID</th>
						<th>Nome</th>
						<th>Categoria</th>
						<th>Quantidade</th>
						<th>Lote</th>
						<th>Validade</th>
						<th>Fornecedor</th>
						<th>Estoque Mín.</th>
						<th>Status</th>
						<th>Ações</th>
					</tr>
				</thead>
				<tbody></tbody>
			</table>
			</div>

			<!-- Modal formulário de insumo -->
			<div id="modalForm" class="popup hidden">
				<div class="popup-content">
					<h3 id="formTitle">Novo Insumo</h3>
					<form id="insumoForm">
						<input type="hidden" id="insumo_id" />
						<div class="form-row">
							<div class="col">
								<label>Nome *</label>
								<input id="nome" required />
							</div>
							<div class="col">
								<label>Categoria</label>
								<input id="categoria" />
							</div>
						</div>
						<div class="form-row">
							<div class="col">
								<label>Quantidade *</label>
								<input id="quantidade" type="number" min="0" required />
							</div>
							<div class="col">
								<label>Estoque Mínimo</label>
								<input id="estoque_minimo" type="number" min="0" />
							</div>
						</div>
						<div class="form-row">
							<div class="col">
								<label>Lote</label>
								<input id="lote" />
							</div>
							<div class="col">
								<label>Validade</label>
								<input id="validade" type="date" />
							</div>
						</div>
						<label>Fornecedor</label>
						<input id="fornecedor" />
						<div class="popup-actions">
							<button type="button" class="close btn secondary">Cancelar</button>
							<button id="saveInsumo" class="btn" type="submit">Salvar</button>
						</div>
					</form>
				</div>
			</div>

			<!-- Modal movimentação -->
			<div id="modalMove" class="popup hidden">
				<div class="popup-content">
					<h3>Movimentação de Estoque</h3>
					<form id="moveForm">
						<input type="hidden" id="move_insumo_id" />
						<div class="form-row">
							<div class="col">
								<label>Tipo</label>
								<select id="move_tipo"><option value="entrada">Entrada</option><option value="saida">Saída</option></select>
							</div>
							<div class="col">
								<label>Quantidade</label>
								<input id="move_quantidade" type="number" min="1" required />
							</div>
						</div>
						<label>Responsável</label>
						<input id="move_responsavel" required />
						<div class="popup-actions">
							<button type="button" class="close btn secondary">Cancelar</button>
							<button id="saveMove" class="btn" type="submit">Registrar</button>
						</div>
					</form>
				</div>
			</div>

		</section>
	</div>
	<footer>
		<p>&copy; 2025 Laboratório de Exames. Todos os direitos reservados.</p>
	</footer>
	<script src="../JS/scriptEstoque.js"></script>
</body>
</html>
